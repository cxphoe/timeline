!function(o){function t(t){for(var e,n,s=t[0],r=t[1],i=t[2],a=0,u=[];a<s.length;a++)n=s[a],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&u.push(c[n][0]),c[n]=0;for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(o[e]=r[e]);for(p&&p(t);u.length;)u.shift()();return l.push.apply(l,i||[]),d()}function d(){for(var t,e=0;e<l.length;e++){for(var n=l[e],s=!0,r=1;r<n.length;r++){var i=n[r];0!==c[i]&&(s=!1)}s&&(l.splice(e--,1),t=a(a.s=n[0]))}return t}var n={},c={0:0},l=[];function a(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return o[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=o,a.c=n,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="./";var e=(s=window.webpackJsonp=window.webpackJsonp||[]).push.bind(s);s.push=t;for(var s=s.slice(),r=0;r<s.length;r++)t(s[r]);var p=e;l.push([47,1]),d()}({47:function(t,e,n){t.exports=n(48)},48:function(t,e,n){"use strict";n(49);var s,r=n(50);((s=r)&&s.__esModule?s:{"default":s})["default"]["new"]().attach(document.body)},49:function(t,e,n){},50:function(t,e,n){"use strict";function s(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}e.__esModule=!0,n(51),n(56),n(57),n(74),n(76),n(45),n(78),n(79),n(80),n(81),n(83),n(87),n(88),n(89),n(90);var o=function o(){for(var t=0,e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];for(var r=0,i=n;r<i.length;r++)t+=i[r];return t},n=function(){function t(){var n=this;s(this,"onTextareaChange",function(t){13===t.keyCode&&(t.preventDefault(),0!==(t=t.target).value.trim().length&&(n.createItem(t.value),t.value=""))}),s(this,"pause",function(){var t,e;n.currentItem&&(t=Date.now(),(e=n.currentItem.timeRanges)[e.length-1].end=t),n.updateStatus(!1)}),s(this,"start",function(){var t;n.currentItem&&(t=Date.now(),n.currentItem.timeRanges.push({start:t})),n.updateStatus(!0)}),s(this,"finish",function(){var t,e;n.currentItem&&(t=Date.now(),(e=n.currentItem.timeRanges)[e.length-1].end=t,n.savedItems.push(n.currentItem),n.currentItem=null,n.update()),n.updateStatus(!1)}),s(this,"onListClick",function(t){t=t.target.closest(".timeline-item").dataset.id;n.selectedItems.has(t)?n.selectedItems["delete"](t):n.selectedItems.add(t),n.update()}),this.currentItem=null,this.savedItems=[],this.elt=null,this.selectedItems=new Set,this.running=!0,this.updateStatus()}t["new"]=function(){return new this};var e=t.prototype;return e.debug=function(){this.savedItems=[{id:"1",text:"test 111",timeRanges:[{start:Date.now()-1e6,end:Date.now()}]},{id:"2",text:"test 333",timeRanges:[{start:Date.now()-1e6,end:Date.now()}]}],this.selectedItems.add("1"),this.selectedItems.add("2")},e.uid=function(){return Math.random().toString().slice(0,5)+"-"+Date.now().toString().slice(10)},e.createItem=function(t){var e,n,s=Date.now();this.currentItem&&((n=(e=this.currentItem).timeRanges[e.timeRanges.length-1]).end||(n.end=s),this.savedItems.push(e)),console.log(this.savedItems,this.currentItem),this.currentItem={id:this.uid(),text:t,timeRanges:[{start:s}]},this.selectedItems.add(this.currentItem.id),this.updateStatus(!0),this.update()},e.update=function(){var r=this,t=this.elt.querySelector(".item-list"),s=function s(t,e,n){for(void 0===n&&(n="0"),t=String(t);t.length<e;)t=n+t;return t},i=function i(t){t=new Date(t);return s(t.getHours(),2)+":"+s(t.getMinutes(),2)},a=function a(t){var e=Math.floor(t/1e3),n=Math.floor(e/60),t="";return n&&(t+=n+"m"),(e%=60)&&(t+=e+"s"),t},u=function u(t){var e=t.timeRanges.map(function(t){var e=i(t.start)+"~";return t.end&&(e+=""+i(t.end)),"<div>"+e+"</div>"}).join(""),n=0;t.timeRanges.forEach(function(t){t.start&&t.end&&(n+=t.end-t.start)});var s=a(n);return'\n        <div\n          class="timeline-item '+(r.selectedItems.has(t.id)?"selected":"")+'"\n          data-id="'+t.id+'"\n        >\n          <span>'+e+"</span>\n          <span>"+s+"</span>\n          <span>"+t.text+"</span>\n        </div>\n      "},e=this.savedItems.filter(function(t){return r.selectedItems.has(t.id)}),e=o.apply(void 0,e.map(function(t){return o.apply(void 0,t.timeRanges.map(function(t){return t.end-t.start}))})),e=a(e),e="\n    <div>\n      <span>时间段</span>\n      <span>计时</span>\n      <span>描述</span>\n    </div>\n    "+this.savedItems.map(u).join("")+"\n    "+(this.currentItem?u(this.currentItem):"")+'\n    <div class="timeline-stat-item">\n      <span>统计选中项时间</span>\n      <span>'+e+"</span>\n      <span></span>\n    </div>\n    ";t.innerHTML=e},e.updateTotal=function(){},e.updateStatus=function(t){this.elt&&(this.elt.querySelector(".editor-status-text").innerHTML=t?"计时中...":"计时暂停"),this.running=t},e.attach=function(t){var e=document.createElement("div");e.id="app",e.innerHTML='\n      <div>\n        <div class="editor-status">状态: <span class="editor-status-text"></span></div>\n        <button class="btn-stop">暂停计时</button>\n        <button class="btn-start">开始计时</button>\n        <button class="btn-finish">结束当前任务</button>\n      </div>\n      <div class="content-area">\n        <textarea class="item-input"></textarea>\n        <div class="item-list">\n          <div>\n            <span>时间段</span>\n            <span>计时</span>\n            <span>描述</span>\n          </div>\n        </div>\n      </div>\n    ',e.querySelector(".item-input").addEventListener("keydown",this.onTextareaChange);var n=e.querySelector(".btn-stop"),s=e.querySelector(".btn-start"),r=e.querySelector(".btn-finish");n.addEventListener("click",this.pause),s.addEventListener("click",this.start),r.addEventListener("click",this.finish),e.querySelector(".item-list").addEventListener("click",this.onListClick),t.appendChild(e),this.elt=e,this.updateStatus(!0),this.update()},t}();e["default"]=n},90:function(t,e,n){}});
//# sourceMappingURL=v1.js.map?v=9694c0958f